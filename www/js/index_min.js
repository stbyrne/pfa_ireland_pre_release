function initiateList(){function t(t){$.ajax({url:"http://pfai.fireflyweb.ie/mobile/transferliststream",dataType:"json",cache:!1,success:function(a){console.log(a),t(a)},error:function(){$.ajax({url:"getList.json",dataType:"json",cache:!1,success:function(a){console.log(a),t(a),alert('The latest "Transfer List" is unavailable at the moment. Please try again later.')}})}})}function a(t){$.ajax({url:"http://pfai.fireflyweb.ie/mobile/pfainews",dataType:"json",cache:!1,success:function(a){console.log(a),t(a)},error:function(){$.ajax({url:"getNews.json",dataType:"json",cache:!1,success:function(a){console.log(a),t(a),alert('The latest "News" feed is unavailable at the moment. Please try again later.')}})}})}app.staticlist.splice(0,2),app.staticlist.pop(),console.log(app.staticlist),app.pagetextcontent.splice(0,2),app.pagetextcontent.pop(),$(app.staticlist).each(function(t){var a=app.staticlist[t],e=app.pagetextcontent[t];$("#"+a+"Content").html('<img class="static-image" src="images/content/'+a+'.png"/><p>'+e+"</p>")}),$("#transferlistContent").html('<table><thead><tr><th><img src="images/player.svg"/>Player</th><th>Club</th><th>Pos</th><th>Dob</th></tr></thead><tbody></tbody></table>'),t(function(t){var a=$("#transferlistContent tbody");$.each(t,function(){var t=this["First Name"],e=this["Last Name"],i=t+" "+e,n=this["Date of Birth"],s=$(n).attr("content").substr(0,10),o=(new Date(s),s.substr(8,s.length)),l=s.substr(5,2),c=s.substr(0,4),p=o+"/"+l+"/"+c,r=this["Previous Clubs"],d=this.Position;a.append($("<tr/>",{id:"row"}).html("<td>"+i+"</td><td>"+r+"</td><td>"+d+"</td><td>"+p+"</td>"))})}),a(function(t){var a=$("#newsContent");a.append($("<ul/>",{"data-theme":"c","data-role":"listview",id:"newslist","class":"ui-nodisc-icon ui-alt-icon"})),$.each(t,function(t){console.log(this.node_title);var a=$("body"),e=this.nid,i=new Date(1e3*this.date),n=i.toDateString(),s=$.trim(this.node_title),o=/<img.*?src="(.*?)"/,l=o.exec(this.thumbnail)[1],c=o.exec(this.field_image)[1],p=this.body,r=$.trim(p.replace("<p>","").substr(0,95)),d=$("#newslist");d.append($("<li />",{"data-icon":"false","class":"ui-icon-alt ui-icon-nodisc"}).html('<a href="#'+e+'"><img src="'+l+'"><h2>'+s+"</h2><p>"+r+'</p><p class="ui-li-aside">'+n+'</p></a><span class="arrow-right-news"></span>')),a.append($("<div />",{id:e,"data-role":"page"}).append($("<div />",{"data-role":"header","data-position":"fixed",id:e+"header","data-theme":"c"}).html('<a href="#left-panel" id="menuNav" class="ui-nodisc-icon" data-role="none"><img src="images/svg/nav_g.svg"/>Menu</a><h1 id="sectionTitle">Latest News</h1><a href="#home" id="homeNav" class="ui-icon-nodisc" data-role="none">Home</a>')).each(function(){$(this).append($("<div />",{"data-role":"content",id:e+"Content","class":"feature"}).html('<h2 class="article-headline">'+s+'</h2><img src="'+c+'"/><span class="article-date">'+n+"</span><p>"+p+"</p>")).append($("<div />",{"data-role":"panel","class":"ui-icon-alt",id:"left-panel"}).each(function(){$(this).append($("<div />",{"data-role":"content"}).append($("<ul />",{"data-role":"listview","data-icon":"false","class":"ui-nodisc-icon ui-alt-icon",id:"listLeft"})))}))}))}),$(app.pagelist).each(function(t){$('[data-role="panel"] ul:not(#homeList)').append($("<li />",{"data-theme":"c"}).html('<a href="#'+app.pageidlist[t]+'"><span class="icon-'+app.pageidlist[t]+'">&nbsp;'+this+'</span></a><span class="arrow-right"></span>'))});var e=$("#news");e.attr("class","app")})}function initiateBackList(){$(app.pagelist).each(function(t){$('[data-role="panel"] ul:not(#homeList)').append($("<li />",{"data-theme":"c"}).html('<a href="#'+app.pageidlist[t]+'"><span class="icon-'+app.pageidlist[t]+'">&nbsp;'+this+'</span></a><span class="arrow-right"></span>'))}),$(app.staticlist).each(function(t){var a=app.staticlist[t],e=app.pagetextcontent[t];$("#"+a+"Content").html('<img class="static-image" src="images/content/'+a+'.png"/><p>'+e+"</p>")})}var app={pagelist:[],pageidlist:[],pagetextcontent:[],staticlist:[]};$(function(){function t(t){$.ajax({url:"https://googledrive.com/host/0B0778NZ3pAKKcHYxWjBiLTc5UjA/content.json",jsonpCallback:"jsonCallback",dataType:"jsonp",cache:!1,timeout:15e3,success:function(a){t(a),initiateList()},error:function(){$.ajax({url:"content.json",jsonpCallback:"jsonCallback",dataType:"jsonp",cache:!1,success:function(a){console.log(a),t(a),initiateBackList(),alert("Unable to connect to database. Current Player Transfer List & Latest News will not be included. Please check your connection and restart the application.")},error:function(){alert("Error loading. Please re-open the app.")}})}})}t(function(t){var a=$(t.app).attr("appTitle"),e=$(t.app).attr("subTitle"),i=($("#newsTitle"),$("#collapseList"),$("#homeList")),n=($("#transList"),$("#loglistLeft"),$("body")),s=$(t.app.section);$("#home div h1").html(a),$("#home div h2").html(e),s.each(function(t){var a=$(this).attr("id"),e=$(this).attr("title"),s=$(this).attr("content");app.pagelist.push(e),app.pageidlist.push(a),app.pagetextcontent.push(s),app.staticlist.push(a),i.append($("<li />",{"data-theme":"c"}).html('<a href="#'+a+'"><span class="icon-'+a+'">&nbsp;'+e+'</span></a><span class="arrow-right"></span>')).listview("refresh"),console.log("refreshing list"),n.append($("<div />",{id:a,"data-role":"page"}).append($("<div />",{"data-role":"header","data-position":"fixed",id:a+"header","data-theme":"c"}).html('<a href="#left-panel" id="menuNav" class="ui-nodisc-icon" data-role="none"><img src="images/svg/nav_g.svg"/>Menu</a><h1 id="sectionTitle">'+e+'</h1><a href="#home" id="homeNav" class="ui-icon-nodisc" data-role="none">Home</a>')).each(function(){$(this).append($("<div />",{"data-role":"content",id:a+"Content"})).append($("<div />",{"data-role":"panel","class":"ui-icon-alt",id:"left-panel"}).each(function(){$(this).append($("<div />",{"data-role":"content"}).append($("<ul />",{"data-role":"listview","data-icon":"false","class":"ui-nodisc-icon ui-alt-icon",id:"listLeft"})))}))}))}),$("#mapsContent").append($("<div/>",{id:"loader"}).html('<h2>Loading Map</h2><img src="images/load.gif"/>'))})}),$(document).on("pageshow","#maps",function(){function t(t){e(new google.maps.LatLng(t.coords.latitude,t.coords.longitude)),$("#mapsContent").gmap("addMarker",i)}function a(){e(i)}function e(t){var a={zoom:10,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map(document.getElementById("mapsContent"),a),n="images/loc.svg",s=new google.maps.Marker({position:t,map:e,title:"You are here!"}),o=new google.maps.Marker({position:i,map:e,icon:n,title:"PFA Ireland Offices"});google.maps.event.addListener(s,"click",function(){alert("You are here")}),google.maps.event.addListener(o,"click",function(){alert("PFA Ireland Offices")})}var i=new google.maps.LatLng(53.3954533,-6.35598);navigator.geolocation?navigator.geolocation.getCurrentPosition(t,a,{maximumAge:5e5,enableHighAccuracy:!0,timeout:1e4}):e(i)});